/*! Substrata 05-01-2014 */
function Substrata(){var a=this,b=jQuery,c={imageSize:500,inputForm:null,inputField:null,coverContainer:null,mainContainer:null,loadingContainer:null,header:null};this.init=function(){this.cacheElements(),this.bindEvents(),this.setInitialConditions()},this.cacheElements=function(){c.inputForm=b("form.username"),c.inputField=b("input.username"),c.coverContainer=b(".covershots"),c.mainContainer=b(".main"),c.loadingContainer=b(".loading"),c.header=b("header")},this.bindEvents=function(){c.inputForm.on("submit",this.usernameFormWasSubmitted)},this.setInitialConditions=function(){c.inputField.focus()},this.usernameFormWasSubmitted=function(b){b.preventDefault(),a.requestAlbums(c.inputField.val()),c.loadingContainer.addClass("active"),c.header.removeClass("expanded")},this.requestAlbums=function(a){var d=b.get("/albums/"+a);c.coverContainer.fadeOut(function(){c.coverContainer.empty()}),d.then(function(a){_.each(a,function(a){c.coverContainer.append('<img src="'+a.image+'" class="albumcover">')}),c.loadingContainer.removeClass("active"),c.coverContainer.fadeIn()})},this.setupWindow=function(){return console.log("setupWindow()"),window.innerHeight},this.testRun=function(){return!0}}